<html>
<head>
<meta charset="utf-8">
<script src="jquery.js"></script>
</head>
<body>
<script>
   /*
    $(function() {
        PageAction.currenPageActionClassName = 'Product_Product'; // = Product_Product
        if (typeof PageAction[PageAction.currenPageActionClassName] == 'undefined') {
            PageAction[PageAction.currenPageActionClassName] = function() {
                var _addEditPage = PageAction.pack + 'product/productContent?parentPageId=product&currenPageActionClassName=Product_Product';
                return {
                    grid: '#container_product_product .data_grid_wrapper',
                    addEditPage: _addEditPage,
                    handlerUrl: PageAction.root + 'handler/Admin.Product.Product.',
                    init: function() {
                        var _g = this.grid;
                        $(':input[type=submit], :radio[name=is_display]', _g).click(function() {
                            Navigation.getSearchData(_g);
                        });
                        $('select[name=type_id]', _g).change(function() {
                            Navigation.getSearchData(_g);
                        });
                        this.read();
                    },
                    read: function() {
                        $(this.grid).dataGrid({
                            url: this.handlerUrl + 'Read',
                            params: [{name: 'is_part', value: '0'}, {name: 'is_display', value: '1'}],
                            sortName: 'a.product_id',
                            sortOrder: 'DESC',
                            rp: 50,
                            buttons: [
                                {name: '普通', dbAction: {action: this.handlerUrl + 'SetFieldValue', field: 'is_status', fieldValue: 0}, onpress: this.setFieldValue},
//{ name:'最新', dbAction: { action : this.handlerUrl + 'SetFieldValue', field : 'is_status', fieldValue : 1 }, onpress:this.setFieldValue },
//{ name:'热门', dbAction: { action : this.handlerUrl + 'SetFieldValue', field : 'is_status', fieldValue : 2 }, onpress:this.setFieldValue },
                                {name: '新品', dbAction: {action: this.handlerUrl + 'SetFieldValue', field: 'is_status', fieldValue: 4}, onpress: this.setFieldValue},
                                {name: '首页显示', dbAction: {action: this.handlerUrl + 'SetFieldStatus', field: 'is_home_display'}, onpress: this.setFieldStatus, margin: true},
                                {separator: true},
                                {name: '添加产品', bclass: 'add', onpress: this.add}, {separator: true}, {name: '刷 新', bclass: 'refresh', onpress: Navigation.getSearchData},
                                {separator: true},
                                {name: '全 选', bclass: 'set_all'},
                                {name: '反 选', bclass: 'set_inv', margin: true},
                                {separator: true}
                                , {name: '删 除', bclass: 'delete', dbAction: this.handlerUrl + 'Delete', onpress: Navigation.doDelete}],
                            colModel: [
                                {display: 'ID', name: 'a.product_id', width: 30, align: 'center', css: 'num'},
                                {display: '产品类别', width: 150, name: 'a.type_id', align: 'left'},
                                {display: '产品品牌', width: 150, name: 'a.typed_id', align: 'left'},
                                {display: '产品标题', name: 'a.product_title', align: 'left'},
                                {display: '产品图片', width: 60, align: 'center'},
                                {display: '状态', name: 'a.is_status', width: 32, align: 'center'},
                                {display: '首页显示', name: 'a.is_home_display', width: 80, align: 'center'},
                                {display: '点击', width: 50, align: 'center', css: 'num'},
                                {display: '添加时间', name: 'a.add_date', width: 105, align: 'center', css: 'num'}
                            ],
                            height: -12,
                            useSelect: true
                            , onRowDblclick: this.edit});
                    },
                    setFieldValue: function(t, action) {
                        Tools.doLockingUpdate(t, action, [
                            '您确定更改这',
                            '个产品属性状态吗？',
                            'directRemoveLocking',
                            '数据库出错'
                        ]);
                    },
                    setFieldStatus: function(t, action) {
                        Tools.doLockingUpdate(t, action, [
                            '您确定更改这',
                            '个显示状态吗？',
                            'directRemoveLocking',
                            '数据库出错'
                        ]);
                    },
                    add: function(t) {
                        Tools.addEditPageLoad(_addEditPage + '&action=add');
                    },
                    edit: function(t) {
                        Tools.addEditPageLoad(_addEditPage + '&action=edit&id=' + t);
                    }
                }
            }();
            PageAction[PageAction.currenPageActionClassName].init();
        }
        
       
    }); */
    
    //闭包写法1
    (function(){
        var upc="i am upc"
    
        alert(upc);  // 这里主要加载完页面即 输出
    
    })();
    //alert(upc); // 在这里无法执行
     
     var  a = 'global aa';
      //闭包写法2
     (function($){
         //var a = 'aaaa';
        var _val  = $('#is_part').attr('value');  //  alert(_val); 这里无法获取到值
        
        funTest= function(t) {
             
             alert(t + a);
         }
         
          //alert(a); // 这里可以调用 global 变量
     })(jQuery); // 这里的jQuery 不能省略
    
    
    // 普通jq
    $(function(){
        var _val = $('#is_part').attr('value');
        alert("('#is_part')的值 :" + _val); 
        //alert(a);  // 这里可以调用 global 变量
        
        funTest('ttt'); // 这里可以用直接调用闭包里的函数
        
        // 测试方法 [使用闭包写法]
        innerTestFun = function(){
            
            return {
                test1 : function(t){
                    return t + ' && fun in test1';
                },
                test2 : 'test2-value', // 这里应该使用 , 逗号 | 不能用分号
                
                test3Arr :　[
                         { name:'xiaoming', age:25 , sex: 0},
                         { name:'老王', age:32 , sex: 1},       
                    ],
                    
            }
        }();
        
        
        
       var _test1 =  innerTestFun.test1('test1');;
       alert(_test1); 
        
       alert('test2 = ' + innerTestFun.test2); 
        
        printArr(innerTestFun.test3Arr);
        
        alert('-- End --');
    });
         
            /** 
             * 可以输出多维数组 
             * @  key 用于输出的时候传递 输出的 键名 [支持多维, 混排]
             * @returns {undefined}
             */
            function printArr(arr,key){
                for(var k in arr){
                   
                    if(isArray(arr[k])){
                        if(key)  printArr(arr[k],  key + ']['+ k );
                        else     printArr(arr[k], k);
                    }else{
                        if(key)  alert('数组的值: ['+ key + '][' + k + '] => ' + arr[k]);
                        else     alert('数组的值: '+ k + ' => ' + arr[k]);
                    }
                }  
            }
            // 自定义判断是否为数组的方法
            function isArray(object){
                return object && typeof object==='object' || Array == object.constructor;
            }     
     
    
    
    
    
</script>
<h1>=====test ===</h1>
<div class="data_grid_wrapper">
	<div class="control_wrapper">
		<div class="tl"></div>
		<div class="top_control">
			<div class="left">=========</div>
			<div class="control_btn"></div>
		</div>
		<div class="tr"></div>
	</div>
	<div class="grid_wrapper">
		<div class="m_search_field">
			<form name="search_from" onsubmit="return false;">
				<input type="text" id="is_part" name="is_part" value="is_part11" />
				
			</form>
		</div>
	</div>
	<table width="100%" border="0" cellspacing="0" cellpadding="0" class="data_grid">
		<tbody>
		</tbody>
	</table>
</div>


</body>
</html>